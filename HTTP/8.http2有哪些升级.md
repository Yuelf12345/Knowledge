## HTTP 1.1 与 HTTP 2.0 区别
- 二进制分帧
  - 多路复用
  - 优先级
    ```html
        <link rel="stylesheet" href="style.css">
        <link rel="preload" as="script" href="/app.js">
        <img src="/hero-image.jpg" importance="high">// 高优先级
        <script src="/analytics.js" defer></script>  
    ```
  - 流式传输
  - HTTP对头阻塞
- 头部压缩
- 服务器推送

### 传输协议：文本格式  vs  二进制分帧

- HTTP/1.1: 基于文本的明文协议，请求 / 响应以换行符分隔，头信息和 body 以空行分隔。
- HTTP/2.0: 基于二进制的二进制分帧协议，请求 / 响应以帧为单位传输，头信息和 body 以分帧的方式传输。

### 多路复用：彻底解决队头阻塞

- 同一 TCP 连接上的请求按顺序处理，若前一个请求未完成，后续请求需等待。缓解方法：通过 Connection: keep-alive 复用连接，但仍受限于串行处理。
HTTP/1.0 :每个请求需要单独的TCP连接，并且不能复用连接，导致效率低。
HTTP/1.1 :使用持久连接，复用TCP连接，提高效率。但是，HTTP/1.1的持久连接存在一些问题，如：
 队头阻塞：当一个请求需要等待响应时，其他请求会被阻塞。
```javascript
// 览器通常为同一域名打开6-8个TCP连接
// 在同一个TCP连接中，请求必须按顺序处理
// 请求1阻塞时，后续请求2、3、4都必须等待
Request1 -> Request2 -> Request3 -> Request4
//     ↓
//   阻塞时，后续请求都被阻塞
```
- HTTP/2.0 :使用多路复用，多个请求可以在同一个TCP连接中并发处理，从而解决队头阻塞问题。
```javascript
[HTTP 1.1] 请求1 → 响应1 → 请求2 → 响应2  
[HTTP 2.0] 请求1 + 请求2 + 请求3 → 响应2 + 响应1 + 响应3  
```
### 头部压缩（HPACK）

- HTTP/1.1: 头部信息以明文发送，且每次请求都会重复传输相同的头部（如 Cookie、User-Agent 等），造成带宽浪费。
- HTTP/2.0: 头部信息以二进制压缩发送，且头部信息会进行缓存，从而节省带宽。
    使用 HPACK 算法压缩头部：
        静态表：预定义常见头部字段和值（如 :method: GET）。
        动态表：记录本次连接中出现的头部，后续请求可引用索引。
        优势：显著减少头部体积，节省带宽。
        数据：头部大小可从 KB 级压缩至字节级。
```javascript
// HTTP/2 使用 HPACK 压缩算法
// 相同的头部只传输一次，后续使用索引
    // 第一次请求
    :method: GET
    :scheme: https
    :path: /index.html
    :authority: www.example.com
    user-agent: Mozilla/5.0...
    // 后续请求只需要发送变化的部分
    :method: GET
    :path: /about.html
    // 其他头部使用索引引用，大大减少传输数据
```

### 服务器推送（Server Push）
```javascript
// 服务器可以主动推送资源给客户端
// 减少请求往返时间
// 客户端请求
GET /index.html HTTP/2
// 服务器响应 + 推送
HTTP/2 200 OK
[Push Promise] /style.css
[Push Promise] /script.js
[Push Promise] /logo.png
// 客户端可以提前获取所需资源，无需额外请求
```