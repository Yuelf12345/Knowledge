## 1. uniapp 条件编译
条件编译允许同一套代码在不同平台（如 H5、小程序、App 等）上编译时选择性地包含或排除特定代码块，从而实现平台差异化处理。基本语法结构：
```javascript
// #ifdef 平台名称
...代码块A
// #endif

// #ifndef 平台名称
...代码块B
// #endif
```
常用平台标识：
- H5: H5平台
- MP-WEIXIN: 微信小程序
- MP-ALIPAY: 支付宝小程序
- APP-PLUS: App平台
- MP: 各大小程序平台

## 2. uniapp api
uniapp 提供了丰富的 API，用于实现各种功能，如获取用户信息、调用系统 API 等。以下是一些常用的 API：

### 网络
- uni.request() 发起 HTTP 请求
- uni.uplodeFile() 将本地资源上传到开发者服务器，客户端发起一个 POST 请求，其中 content-type 为 multipart/form-data。

### 位置
- uni.getLocation() 获取当前位置

## 3. 微信小程序支付流程
uni.requestPayment
uni.requestPayment() 方法用于发起微信支付。具体流程如下：
1. 第一步：获取用户openid（小程序）
2. 第二步：创建订单
3. 预支付：获取支付必要信息
4. 第三步：调起支付
   ```javascript
   uni.requestPayment({
     provider: 'wxpay', // 微信支付 服务提供商，通过 uni.getProvider 获取。
     orderInfo : {订单信息}
    })
   ```

## 4. 微信小程序登录流程
1. 第一步 调用 uni.login() 获取临时登录凭证(code)
    ```javascript
    uni.login({
        provider: 'weixin', //使用微信登录
        success: function (loginRes) {
            console.log(loginRes.authResult);
        }
    });
    ```
2. 第二步 调用后端接口获取，向微信服务器请求换取 openId 和 session_key。生成自定义 Token
3. 第三步：保存登录态
4. 第四步：获取用户信息（需要用户授权）
    ```javascript
    uni.getUserProfile({
        desc: '用于完善会员资料',
        success: (profileRes) => {
            const userInfo = profileRes.userInfo;
            this.updateUserInfo(userInfo);
        }
    });
    ```