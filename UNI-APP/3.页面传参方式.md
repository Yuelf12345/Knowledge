# 在 UniApp 开发中，页面间参数传递是核心功能之一。以下是 8 种常用的传参方式，每种方式都有其适用场景和特点：

## 1. URL 拼接传参（最常用）
适用场景:简单数据传递，如 ID、状态值等基础类型数据
实现方式:
```javascript
// 发送参数
uni.navigateTo({
  url: '/pages/detail/detail?id=123&name=张三'
})
// 接收参数
export default {
    onLoad: function(options) {
        console.log(options.id)// 123
        console.log(options.name)// 张三
    }
}
```
特点：
- 参数自动解析为字符串
- 长度受限（URL 最大长度约 2KB）
- 不支持复杂对象（需手动序列化）

## 2. 全局变量传参
适用场景：跨页面共享数据（如用户信息）
实现方式：
```javascript
// app.vue 中定义全局变量
export default {
  globalData: {
    userInfo: null
  }
}
// 页面 A 设置数据
const app = getApp()
app.globalData.userInfo = { id: 1, name: '张三' }
// 页面 B 读取数据
const app = getApp()
console.log(app.globalData.userInfo)
```
特点：
- 适合共享频繁使用的数据
- 非响应式（需配合事件机制）
- 长期存在可能内存泄漏

## 3. Vuex 状态管理
适用场景：复杂应用状态共享
实现方式：
```javascript
// store.js
export default new Vuex.Store({
  state: {
    cartItems: []
  },
  mutations: {
    addToCart(state, item) {
      state.cartItems.push(item)
    }
  }
})
// 页面 A 提交数据
this.$store.commit('addToCart', { id: 101, name: '商品A' })
// 页面 B 获取数据
computed: {
  cartItems() {
    return this.$store.state.cartItems
  }
}
```
特点：
- 响应式数据流
- 支持调试工具
- 适合中大型项目

## 4. 本地存储传参
适用场景：持久化数据传递（如登录状态）
实现方式：
```javascript
// 页面 A 存储数据
uni.setStorageSync('token', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9')
// 页面 B 读取数据
const token = uni.getStorageSync('token')
```
特点：
- 数据持久化（关闭应用仍存在）
- 同步操作可能阻塞渲染
- 容量限制（通常 5-10MB）

## 5. EventBus 事件总线
适用场景：任意组件/页面间通信
实现方式：
```javascript
// utils/eventBus.js
export default new Vue()
// 页面 A 发送事件
import eventBus from '@/utils/eventBus'
eventBus.$emit('data-update', { newData: 42 })
// 页面 B 监听事件
export default {
  onLoad() {
    eventBus.$on('data-update', data => {
      console.log('收到数据:', data)
    })
  },
  onUnload() {
    eventBus.$off('data-update') // 必须解绑！
  }
}
```
特点：
- 完全解耦的通信方式
- 需手动管理事件监听
- 滥用可能导致"事件地狱"

## 6. 页面通信通道
适用场景：需要获取前序页面实例的场景
实现方式：
```javascript
// 获取前序页面实例
const pages = getCurrentPages()
const prevPage = pages[pages.length - 2] // 上一页

// 直接调用前页方法
prevPage.$vm.updateData({ id: 2024 })

// 目标页面定义方法
methods: {
  updateData(data) {
    this.data = data
    console.log('收到数据:', data)
  }
}
```
特点：
- 可直接操作页面实例
- 破坏封装性（慎用）
- 小程序端最多 10 层页面栈

## 7. 跨页面通信通道
适用场景：跨页面事件通信（UniApp 2.8.0+）
实现方式：
```javascript
// 页面 A 发送事件
uni.$emit('update', { msg: '数据更新' })

// 页面 B 监听事件
export default {
  onLoad() {
    uni.$on('update', this.handleUpdate)
    uni.$once('update', this.handleUpdate) // 只监听一次
  },
  methods: {
    handleUpdate(data) {
      console.log('收到更新:', data.msg)
    }
  },
  onUnload() {
    uni.$off('update', this.handleUpdate) // 必须解绑
  }
}
```
特点：
- 官方提供的全局事件机制
- 需手动管理事件绑定
- 适合简单通知类通信