# XSS
1. XSS 的定义
XSS 是一种常见的 web 安全漏洞，允许攻击者将恶意脚本注入到一个网站的网页中，这些脚本在用户浏览器上执行。由于脚本是来自受信任的源（即受害者的当前网站），因此浏览器不会阻止其执行。
2. XSS 的分类
- 存储型（Persistent/Type-I）：恶意脚本被存储在服务器端，并在页面加载时由服务器端直接输出到受害者浏览器中。例如，在论坛或博客评论区留下的持久性留言。
- 反射型（Non-Persistent/Type-II）：恶意脚本作为参数嵌入在URL中，当其他用户点击该链接时，服务器接收到请求后将其包含在响应中，从而在受害者的浏览器环境中执行。
- DOM 型（Type-0 或 Type-DOM-Based）：这种类型的XSS不依赖于服务器端输出数据，而是发生在客户端。攻击者通过构造特定输入，诱使应用动态修改DOM结构，导致恶意脚本被执行。这类攻击通常与JavaScript操作有关，攻击代码存在于DOM中而不是HTTP响应体中。

3. XSS 攻击的危害
恶意脚本可以盗取用户的敏感信息如Cookie、会话Token等，实现会话劫持。
改变网页内容，对用户进行欺诈。
执行任意操作，如发起钓鱼攻击、传播恶意软件等。

4. 防御措施
- 输入验证与过滤：对所有用户提交的数据进行严格的输入验证和适当的转义过滤，确保特殊字符（如 <, > 等）在显示给其他用户之前变为安全格式。
- 输出编码：在向HTML页面输出数据时，对可能含有特殊字符的内容进行HTML实体编码或者使用合适的上下文感知编码方法（如textContent代替innerHTML）。
- HTTPOnly Cookie：设置HttpOnly属性来防止恶意脚本访问Cookie内容。
- Content Security Policy (CSP)：实施内容安全策略以限制脚本来源，只允许执行指定域下的脚本。
- 使用令牌（Token）机制：为防止CSRF和某些类型的XSS，可采用一次性令牌（nonce）或其他认证技术。

5. 框架和库的支持
鼓励使用现代前端框架（如React、Vue等），它们内置了一些对抗XSS的安全特性，比如模板引擎自动转义。
总结起来，理解和防范XSS攻击是前端开发者必备的安全技能之一，它需要开发者具备良好的安全意识，掌握有效的编码习惯和技术手段，从多个层面去防止恶意脚本注入和执行。